###############################################################################
# redis-server - Redis Datastore Server
#
# Redis is a key value in memory persistent datastore
###############################################################################

start on (local-filesystems and runlevel [2345])
stop on runlevel [016]

limit nofile 65000 65000
pre-start script
    <% @kernel_options.each do |kernel_option| %>
    <%= kernel_option %>
    <% end %>
    mkdir -p -m0755 <%= @run_dir %>
    chown <%= @username %>:<%= @group %> <%= @run_dir %>
end script

respawn
expect fork
exec start-stop-daemon --start --chuid <%= @username %>:<%= @group %> --pidfile <%= @pidfile %> --exec <%= @exec %> -- <%= @conf %>

