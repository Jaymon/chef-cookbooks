#!/usr/bin/env bash
export PYENV_OPT_ROOT=<%= @dir %>
export PATH="$PYENV_OPT_ROOT/bin:$PATH"

###############################################################################
# The following commands are copied from @dir/bin/pyenv and are here so we can
# globally install pyenv but have each user be able to install their own python
# versions while leaving the global pyenv untouched
###############################################################################
shopt -s nullglob

for plugin_bin in "${PYENV_OPT_ROOT}/plugins/"*/bin; do
  PATH="${plugin_bin}:${PATH}"
done

for plugin_hook in "${PYENV_OPT_ROOT}/plugins/"*/etc/pyenv.d; do
  PYENV_HOOK_PATH="${PYENV_HOOK_PATH}:${plugin_hook}"
done
PYENV_HOOK_PATH="${PYENV_HOOK_PATH#:}"

export PATH
export PYENV_HOOK_PATH

shopt -u nullglob
###############################################################################

eval "$(pyenv init -)"

